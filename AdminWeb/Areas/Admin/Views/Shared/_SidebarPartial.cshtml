@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor

<nav class="navbar-default navbar-static-side" role="navigation">
    <div class="sidebar-collapse">
        <ul class="nav metismenu" id="side-menu">
            <li class="nav-header">
                <div class="dropdown profile-element">
                    <span>
                        <img alt="image" class="img-circle" src="/admin/img/profile_small.jpg" />
                    </span>
                    <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                        <span class="clear">
                            <span class="block m-t-xs">
                                @if (User?.Identity?.IsAuthenticated == true)
                                {
                                    <strong class="font-bold">Xin chào, @(User?.Identity?.Name ?? "Người dùng")</strong>
                                }

                            </span>
                            <span class="text-muted text-xs block">
                                @(HttpContextAccessor.HttpContext?.Session?.GetString("AdminName") ?? "Admin")
                                <b class="caret"></b>
                            </span>
                        </span>
                    </a>
                    <ul class="dropdown-menu animated fadeInRight m-t-xs">
                        <li class="nav-item">
                            <a class="nav-link" asp-area="Admin" asp-controller="Profile" asp-action="Index">
                                <i class="bi bi-person-circle"></i> Hồ sơ
                            </a>
                        </li>
                        <li>
                            <a asp-action="Logout" asp-controller="Account"
                               onclick="return confirm('Bạn có chắc chắn muốn đăng xuất không?');">
                                Đăng xuất
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="logo-element">IN+</div>
            </li>

            <!--Start Sidebar-->
            <li>
                <a asp-action="Index" asp-controller="Dashboard">
                    <i class="fa fa-th-large"></i> <span class="nav-label">Trang chủ</span>
                </a>
            </li>

            <li>
                <a asp-action="Index" asp-controller="Category">
                    <i class="fa fa-diamond"></i> <span class="nav-label">Danh mục</span>
                </a>
            </li>

            <li class="has-submenu">
                <a href="#"><i class="fa fa-bar-chart-o"></i> <span class="nav-label">Sản phẩm</span><span class="fa arrow"></span></a>
                <ul class="nav nav-second-level collapse">
                    <li><a asp-action="Index" asp-controller="Product">Danh sách sản phẩm</a></li>
                    <li><a asp-action="Create" asp-controller="Product">Tạo sản phẩm</a></li>
                </ul>
            </li>

            <li>
                <a asp-action="Index" asp-controller="Order">
                    <i class="fa fa-shopping-cart"></i> <span class="nav-label">Đơn hàng</span>
                </a>
            </li>

            <li>
                <a asp-action="Index" asp-controller="User">
                    <i class="fa fa-user"></i> <span class="nav-label">Người dùng</span>
                </a>
            </li>

            <li>
                <a asp-action="Index" asp-controller="Payment">
                    <i class="fa fa-credit-card"></i> <span class="nav-label">Thanh toán</span>
                </a>
            </li>

            <li>
                <a asp-action="Index" asp-controller="Review">
                    <i class="fa fa-star"></i> <span class="nav-label">Đánh giá</span>
                </a>
            </li>

            @* <li>
                <a asp-action="Index" asp-controller="Shipping">
                    <i class="fa fa-map-marker"></i> <span class="nav-label">Địa chỉ giao hàng</span>
                </a>
            </li> *@

            <li>
                <a asp-action="Index" asp-controller="Shipper">
                    <i class="fa fa-truck"></i> <span class="nav-label">Yêu cầu Shipper</span>
                </a>
            </li>
            <!--End Sidebar-->
        </ul>
    </div>
</nav>

@section Styles {
    <style>
        .nav > li.active > a,
        .nav > li > a:hover {
            background-color: #1ab394;
            color: white !important;
        }

        .nav.nav-second-level > li.active > a {
            background-color: #18a689;
            color: white !important;
        }
    </style>
}

@section Scripts {
    <script>
        $(function () {
            $('#side-menu').metisMenu();

            var currentPath = window.location.pathname.toLowerCase().split(/[?#]/)[0];
            $('#side-menu li').each(function () {
                var link = $(this).find('> a').attr('href');
                if (link && currentPath === link.toLowerCase().split(/[?#]/)[0]) {
                    $(this).addClass('active');
                    return false;
                }
                $(this).find('ul li a').each(function () {
                    var subLink = $(this).attr('href');
                    if (subLink && currentPath === subLink.toLowerCase().split(/[?#]/)[0]) {
                        $(this).parent().addClass('active');
                        $(this).closest('.has-submenu').addClass('active').children('ul').addClass('in');
                        return false;
                    }
                });
            });
        });
    </script>
}
